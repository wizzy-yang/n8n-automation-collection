{
  "name": "æ—©å®‰åŠ©æ‰‹",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 7,
              "triggerAtMinute": 5
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        -48,
        0
      ],
      "id": "a4e1bfa2-35d4-4de9-83b7-24565b44a1ff",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://www.pushplus.plus/send",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"token\": \"your_token\",\n  \"topic\": \"your_group\",\n  \"title\": \"æ—©å®‰ï¼æ–°çš„ä¸€å¤©\",\n  \"content\": \"{{ $json.output }}\",\n  \"template\": \"html\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        736,
        0
      ],
      "id": "dd9e7309-135a-45eb-a119-2a80e99dd41e",
      "name": "Send messge"
    },
    {
      "parameters": {
        "url": "https://api.open-meteo.com/v1/forecast?latitude=38.0428&longitude=114.5149&current_weather=true&timezone=Asia%2FShanghai",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        128,
        0
      ],
      "id": "fc80bb35-5417-43b3-abad-90b8bdea8a96",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ã€ä»Šå¤©æ˜¯ã€‘ï¼š{{ $('Schedule Trigger').item.json.Year }}{{ $('Schedule Trigger').item.json.Month }}{{ $('Schedule Trigger').item.json['Day of month'] }}\nã€å®æ—¶å¤©æ°”ã€‘ï¼š{{ $json.weather_text }}ï¼Œæ¸©åº¦ {{ $('HTTP Request').item.json.current_weather.temperature }}Â°C",
        "needsFallback": true,
        "options": {
          "systemMessage": "=# Role\nä½ æ˜¯ä¸€ä¸ªâ€œå˜´æ¯’å¿ƒè½¯â€çš„æ­»å…šï¼Œä¹Ÿæ˜¯ä¸€ä½å¹½é»˜çš„å¤©æ°”æ’­æŠ¥å‘˜ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®å½“å¤©çš„ã€å¤©æ°”ã€‘å’Œã€æ¸©åº¦ã€‘ï¼Œç”Ÿæˆä¸€æ®µæ—¢æƒ³è®©äººç¬‘åˆè§‰å¾—â€œå¥½æœ‰é“ç†â€çš„æ—©å®‰æ–‡æ¡ˆã€‚\n### ğŸš¨ ç»å¯¹æ ¼å¼çº¢çº¿ï¼ˆè¿åä¼šå¯¼è‡´ç³»ç»ŸæŠ¥é”™ï¼‰ï¼š\n1. **ç‰©ç†å•è¡Œ**ï¼šè¾“å‡ºå†…å®¹å¿…é¡»æ˜¯**è¿ç»­çš„ä¸€æ•´è¡Œå­—ç¬¦ä¸²**ã€‚ä¸¥ç¦è¾“å‡ºä»»ä½•ç‰©ç†æ¢è¡Œç¬¦ï¼ˆ\\n, \\rï¼‰æˆ–å›è½¦ã€‚\n2. **æ¢è¡Œè½¬ä¹‰**ï¼šæ‰€æœ‰éœ€è¦è§†è§‰æ¢è¡Œçš„åœ°æ–¹ï¼Œ**å¿…é¡»**ä½¿ç”¨ `<br>` æ ‡ç­¾ä»£æ›¿ã€‚\n3. **ç¬¦å·æ¸…æ´—**ï¼š\n   - ä¸¥ç¦ä½¿ç”¨ Markdown ç¬¦å·ï¼ˆå¦‚ #, -, *, ```ï¼‰ã€‚\n   - **ä¸¥ç¦ä½¿ç”¨åŒå¼•å· `\"`**ï¼ˆè¿™ä¼šç ´å JSON ç»“æ„ï¼‰ï¼Œæ­£æ–‡ä¸­æ‰€æœ‰éœ€è¦å¼•ç”¨çš„åœ°æ–¹è¯·ä¸€å¾‹ä½¿ç”¨**å•å¼•å· `'`**ã€‚\n   - ä¸¥ç¦è¾“å‡º `\\n` å­—ç¬¦ã€‚\n# Instructions\nè¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹é€»è¾‘ç”Ÿæˆå†…å®¹ï¼š\n1. **ã€æ¸©åº¦åæ§½ã€‘**ï¼ˆå¿…é¡»æ ¹æ®æ•°å€¼åŠ¨æ€è°ƒæ•´ï¼‰ï¼š\n   - **è‹¥æ¸©åº¦ < 10Â°C**ï¼šä½¿ç”¨â€œé­”æ³•æ”»å‡»â€ã€â€œè¢«å°å°åœ¨è¢«çªé‡Œâ€ã€â€œå‡ºé—¨éœ€è¦æ¢é™èŒ¹ç»™å‹‡æ°”â€ç­‰æ¢—ã€‚å¼ºè°ƒå†·å¾—æƒ³å†¬çœ ã€‚\n   - **è‹¥ 10Â°C <= æ¸©åº¦ <= 25Â°C**ï¼šåæ§½è¿™ç§â€œèˆ’é€‚å¾—è®©äººä¸æƒ³ä¸Šç­â€çš„è¯¡å¼‚å¤©æ°”ï¼Œæˆ–è€…æ˜¯â€œä¹±ç©¿è¡£â€çš„å­£èŠ‚ï¼ˆå¤§è¡—ä¸Šç©¿çŸ­è¢–çš„å’Œç©¿ç¾½ç»’æœçš„äº’ç§°å‚»Xï¼‰ã€‚\n   - **è‹¥æ¸©åº¦ > 25Â°C**ï¼šä½¿ç”¨â€œå…¨ç†Ÿâ€ã€â€œè¡Œèµ°çš„äº”èŠ±è‚‰â€ã€â€œåˆ«å¿˜å¸¦å­œç„¶â€ç­‰æ¢—ã€‚å¼ºè°ƒçƒ­å¾—å¿«èåŒ–äº†ã€‚\n   - **è‹¥ä¸‹é›¨**ï¼šåæ§½â€œè¿™æ˜¯è€å¤©çˆ·åœ¨ä¸ºä½ ä¸ç”¨å»ä¸Šç­çš„æ¢¦æƒ³æµæ³ªï¼ˆä½†ä½ è¿˜æ˜¯å¾—å»ï¼‰â€ã€‚\n2. **ã€ç©¿è¡£ç„å­¦å»ºè®®ã€‘**ï¼š\n   - ä¸è¦ç»™æ­£ç»å»ºè®®ï¼è¦ç»™å‡ºç”»é¢æ„Ÿã€‚\n   - æ¯”å¦‚ï¼šä¸è¦è¯´â€œç©¿ç¾½ç»’æœâ€ï¼Œè¦è¯´â€œå»ºè®®æŠŠè‡ªå·±è£¹æˆç±³å…¶æ—è½®èƒäººâ€æˆ–â€œç©¿å¾—åƒä¸ªè¦å»å—æè€ƒå¯Ÿçš„ä¼é¹…â€ã€‚\n   - æ¯”å¦‚ï¼šä¸è¦è¯´â€œç©¿çŸ­è¢–â€ï¼Œè¦è¯´â€œå»ºè®®ç©¿å¾—è¶Šå°‘è¶Šå¥½ï¼Œå¦‚æœæ³•å¾‹å…è®¸çš„è¯â€ã€‚\n3. **ã€ç»“å°¾ã€‘**ï¼š\n   - ä¸€å¥ç®€çŸ­çš„â€œå¸¦è–ªæ‘¸é±¼â€é¼“åŠ±ï¼Œå¿…é¡»æ­£èƒ½é‡ä¸­å¸¦ç€ä¸€ä¸â€œä¸§â€ã€‚\n# Output Format\nè¯·ç›´æ¥è¾“å‡ºæ–‡æ¡ˆï¼Œä¸è¦ä»»ä½•è§£é‡Šã€‚è¯­æ°”è¦åƒå‘å¾®ä¿¡ç»™æŸå‹ã€‚\n# Example Output Style\n\"æ—©å•Šæ‰“å·¥äººï¼å¤–é¢ç°åœ¨5åº¦ï¼Œè¿™æ¸©åº¦ä¸ä»…èƒ½å†»æ­»çˆ±æƒ…ï¼Œè¿˜èƒ½å†»æ­»ä½ ä»…å­˜çš„èµ·åºŠæ°”ã€‚\nå»ºè®®ï¼šè¯·ç«‹åˆ»æŠŠç§‹è£¤å¡è¿›è¢œå­é‡Œï¼Œè¿™æ˜¯å¯¹å†¬å¤©æœ€èµ·ç çš„å°Šé‡ã€‚åˆ«é¡¾åŠå½¢è±¡äº†ï¼Œä¿å‘½è¦ç´§ï¼Œè£¹æˆç²½å­ä¹Ÿæ²¡äººç¬‘è¯ä½ ã€‚\nå†²å§ï¼Œå»å¾æœä¸–ç•Œï¼ˆæˆ–è€…åªæ˜¯å»æ‰“ä¸ªå¡ï¼‰ï¼ğŸ¥¶\""
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        416,
        0
      ],
      "id": "b048b7d9-53ca-471d-84c2-d5911e8560a1",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        464,
        256
      ],
      "id": "594384c9-49f8-4e5e-be35-b033be7cacfb",
      "name": "DeepSeek Chat Model",
      "credentials": {
        "deepSeekApi": {
          "id": "RinN9uh2RphsP7ie",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// è·å–ä¸Šä¸€æ­¥ API è¿”å›çš„å¤©æ°”ä»£ç \nconst weatherCode = items[0].json.current_weather.weathercode;\nlet weatherDesc = \"æœªçŸ¥å¤©æ°”\";\n\n// WMO Weather interpretation codes (WW)\n// é€»è¾‘åˆ¤æ–­ï¼šå°†æ•°å­—æ˜ å°„ä¸ºä¸­æ–‡æè¿°\nswitch (true) {\n  case (weatherCode === 0):\n    weatherDesc = \"æ™´ç©ºä¸‡é‡Œ\";\n    break;\n  case (weatherCode >= 1 && weatherCode <= 3):\n    weatherDesc = \"å¤šäº‘è½¬é˜´\";\n    break;\n  case (weatherCode >= 45 && weatherCode <= 48):\n    weatherDesc = \"æœ‰é›¾\";\n    break;\n  case (weatherCode >= 51 && weatherCode <= 55):\n    weatherDesc = \"æ¯›æ¯›é›¨\";\n    break;\n  case (weatherCode >= 56 && weatherCode <= 57):\n    weatherDesc = \"å†»é›¨\";\n    break;\n  case (weatherCode >= 61 && weatherCode <= 65):\n    weatherDesc = \"ä¸‹é›¨\";\n    break;\n  case (weatherCode >= 66 && weatherCode <= 67):\n    weatherDesc = \"é›¨å¤¹é›ª\";\n    break;\n  case (weatherCode >= 71 && weatherCode <= 75):\n    weatherDesc = \"ä¸‹é›ª\";\n    break;\n  case (weatherCode >= 80 && weatherCode <= 82):\n    weatherDesc = \"é˜µé›¨\";\n    break;\n  case (weatherCode >= 95 && weatherCode <= 99):\n    weatherDesc = \"é›·æš´\"; // ç”šè‡³å¯èƒ½æœ‰å†°é›¹\n    break;\n  default:\n    weatherDesc = \"å¤©æ°”ä¸€èˆ¬\";\n}\n\n// å°†ç¿»è¯‘å¥½çš„ç»“æœæ·»åŠ å›æ•°æ®æµä¸­\n// ä½ ä¼šåœ¨è¾“å‡ºä¸­çœ‹åˆ°ä¸€ä¸ªæ–°çš„å­—æ®µå« \"weather_text\"\nfor (const item of items) {\n  item.json.weather_text = weatherDesc;\n}\n\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        256,
        0
      ],
      "id": "5bf698f6-75a2-4248-8ae5-40a1fb95485f",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "model": "deepseek/deepseek-r1-0528:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        368,
        256
      ],
      "id": "8dd747af-4b36-4cd2-b65d-1920a74175fd",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "BKyt9rk0Pos5bg6r",
          "name": "OpenRouter account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send messge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timeSavedMode": "fixed",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false,
    "timezone": "Asia/Shanghai"
  },
  "versionId": "3a4626dd-d8c0-480b-b623-5ea696764d6a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "d61e6ad484caf966c9a7878dee681c340df37041094f66b15403ad7302b41444"
  },
  "id": "NohxtmEvbqicfQvW",
  "tags": []
}